#include <stdio.h>
static inline int ls1bit32(unsigned int x)
{
	int b = 31, s;

	s = 16; if (x << 16 == 0) s = 0; b -= s; x <<= s;
	s =  8; if (x <<  8 == 0) s = 0; b -= s; x <<= s;
	s =  4; if (x <<  4 == 0) s = 0; b -= s; x <<= s;
	s =  2; if (x <<  2 == 0) s = 0; b -= s; x <<= s;
	s =  1; if (x <<  1 == 0) s = 0; b -= s;

	return b;
}
/*
test result: return the the 1st set least significant bit
00:00000001 0
01:00000002 1
02:00000004 2
03:00000008 3
04:00000010 4
05:00000020 5
06:00000040 6
07:00000080 7
08:00000100 8
09:00000200 9
10:00000400 10
11:00000800 11
12:00001000 12
13:00002000 13
14:00004000 14
15:00008000 15
16:00010000 16
17:00020000 17
18:00040000 18
19:00080000 19
20:00100000 20
21:00200000 21
22:00400000 22
23:00800000 23
24:01000000 24
25:02000000 25
26:04000000 26
27:08000000 27
28:10000000 28
29:20000000 29
30:40000000 30
31:80000000 31
2
15
*/
int main()
{
	int i;
	int v;
	for (i = 0; i < 32; i++) {
		v = 1<<i;
		printf("%02d:%08x %d\n", i, v, ls1bit32(v));
	}
	printf("%d\n", ls1bit32(0xc));
	printf("%d\n", ls1bit32((1<<31)|(1<<15)));
	return 0;
}
